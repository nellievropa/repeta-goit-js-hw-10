{"mappings":"AAyBA,IAAMA,SAAW,gCACXC,SAAW,qBAEXC,QAAU,mCACVC,KAAOC,SAASC,cAAc,YAC9BC,SAAWF,SAASC,cAAc,YAEpCE,YAAc,EAMoD,SAA7DC,SAIuCC,YAFOF,aAApC,GAGVG,MAAK,SAACC,GACHR,KAAKS,mBAAmB,YAAaC,aAAaF,EAAKG,UACnDH,EAAKI,OAASJ,EAAKK,cACnBV,SAASW,QAAS,E,IAG7BC,OAAM,SAAAC,G,OAASC,QAAQC,IAAIF,E,IAGhC,SAASV,c,IAAYM,EAAAO,UAAAC,OAAA,YAAAD,UAAA,GAAMA,UAAA,GAAD,EACtB,OAAOE,MAAM,GAAcC,OAAXzB,UAA+ByB,OAApBxB,SAAS,aAA2BwB,OAAhBvB,QAAQ,UAAauB,OAALV,IAAQL,MAAK,SAAAgB,GACxE,IAAKA,EAAKC,GACN,MAAM,IAAIC,MAAMF,EAAKG,YAEzB,OAAOH,EAAKI,M,IAgBpB,SAASjB,aAAakB,GAClB,OAAOA,EAAIC,KAAI,SAAAC,G,IAAGC,EAAWD,EAAXC,YAAaC,EAAKF,EAALE,M,MAAY,sDACqBV,OAArBS,EAAY,WAC7CT,OADsDU,EAAM,oBACtDV,OAANU,EAAM,mB,IACRC,KAAK,G,CA3CjB9B,SAAS+B,iBAAiB,QAAS7B,QA6BqEC,cACnGC,MAAK,SAACC,GACXR,KAAKS,mBAAmB,YAAaC,aAAaF,EAAKG,UAC3CH,EAAKI,OAASJ,EAAKK,cACvBV,SAASW,QAAS,E,IAIrBC,OAAM,SAAAC,G,OAASC,QAAQC,IAAIF,E","sources":["src/js/05-scroll.js"],"sourcesContent":["\n\n\n// const BASE_URL = 'https://the-one-api.dev/v2';\n// const END_POINT = 'character';\n// const KEY = 'fP9PYRN - X34XoDXpvVl1';\n\n// function getCharacter() {\n//     const param = new URLSearchParams({\n//         limit: 20,\n//         page: 1,\n//     })\n\n//     const option = {\n//         method: 'GET',\n//         headers: {\n//         Authorization: `Bearer ${KEY}`\n//         }\n//     }\n\n//     fetch(`${BASE_URL}${END_POINT}?${param}`, option).then(resp => console.log(resp))\n// }\n\n// getCharacter();\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst ENDPOINT = 'trending/movie/day';\n// const API_KEY = '345007f9ab440e5b86cef51be6397df1';\nconst API_KEY = '75a59728a8a611489d2b48a322755689';\nconst list = document.querySelector(\".js-list\");\nconst loadMore = document.querySelector('.js-load');\n// створюємо змінну, яка буде зберігати номер сторінки\nlet currentPage = 1;\n\nloadMore.addEventListener('click', onload)\n\n// ця функція має відповідати за номер сторінки\n// Обов'язково треба робити перевірку, чи є можливість завантажити наступну сторінку!\nfunction onload() {\n    // після того, як натисли кнопку Лоад море, збільшуємо номер її на 1 \n    currentPage += 1\n    // викликати функцію getTranding і передати в неї поточну сторінку\n    getTranding(currentPage)\n        .then((data) => {\n            list.insertAdjacentHTML('beforeend', createMarkup(data.results))\n            if (data.page === data.total_pages) {\n                loadMore.hidden = true;\n            }\n    })\n    .catch(error => console.log(error));\n}\n\nfunction getTranding(page=1) {\n    return fetch(`${BASE_URL}${ENDPOINT}?api_key=${API_KEY}&page=${page}`).then(resp => {\n        if (!resp.ok) {\n            throw new Error(resp.statusText)\n        }\n        return resp.json();\n    });\n}\n\n// щоб показати кнопку після першої розмітки додаємо в перший then {}\n// пагінація повинна віддавати номер поточної сторінки і загальну кількість сторінок - і нам треба перевірити на якій ми зараз\ngetTranding()\n    .then((data) => {\nlist.insertAdjacentHTML('beforeend', createMarkup(data.results))\n        if (data.page !== data.total_pages) {\n        loadMore.hidden = false\n    }})\n    // просто подивитися, що прийшло\n    // .then(data => console.log(data))\n    .catch(error => console.log(error));\n\nfunction createMarkup(arr){\n    return arr.map(({ poster_path, title }) => `<li>\n    <img src=\"https://image.tmdb.org/t/p/w400${poster_path}\" alt=\"${title}\">\n        <h2>${title}</h2>\n    </li>`).join('')\n}\n\n"],"names":["BASE_URL","ENDPOINT","API_KEY","list","document","querySelector","loadMore","currentPage","onload","getTranding","then","data","insertAdjacentHTML","createMarkup","results","page","total_pages","hidden","catch","error","console","log","arguments","length","fetch","concat","resp","ok","Error","statusText","json","arr","map","param","poster_path","title","join","addEventListener"],"version":3,"file":"05-scroll.71828257.js.map"}