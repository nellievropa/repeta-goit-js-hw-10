{"mappings":"AAKA,MAAMA,EAAO,CACTC,WAAYC,SAASC,cAAc,mBACnCC,kBAAmBF,SAASC,cAAc,gBAC1CE,YAAaH,SAASC,cAAc,8BAGlCG,EAAiB,ICXR,MAMXC,gBACIC,QAAQC,IAAIC,MACZ,MAMUC,EAAM,uCAAuCD,KAAKE,2CAA2CF,KAAKG,OAGjCC,MAAjEH,EATM,CACZI,QAAS,CACLC,cAAe,sCAQlBC,MAAKC,GAAKA,EAAEC,OACZF,MAAKG,IACFV,KAAKG,MAAQ,CAAC,G,CAKtBQ,YACA,OAAOX,KAAKE,W,CAGZS,UAAMC,GACNZ,KAAKE,YAAcU,C,CA7BvBC,cACJb,KAAKE,YAAc,GACnBF,KAAKG,KAAO,C,GDUZb,EAAKC,WAAWuB,iBAAiB,UAMJ,SAAXC,GAEyBA,EAArCC,iBAINpB,EAAee,MAAQI,EAAEE,cAAcC,SAASP,MAAMQ,MAmB1BvB,EAATC,e,IA9BnBP,EAAKK,YAAYmB,iBAAiB,SAoCqE,WAcnGlB,EAAeC,e","sources":["src/js/03-load-more-btn.js","src/js/news-components.js"],"sourcesContent":["import '../css/common.css';\nimport NewsApiService from './news-components';\n\n\n\nconst refs = {\n    searchForm: document.querySelector('.js-search-form'),\n    articlesContainer: document.querySelector('.js-articles'),\n    loadMoreBtn: document.querySelector('[data-action=\"load more\"]')\n};\n// створюємо екземпляр классу NewsApiService\nconst newsApiService = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n// щоб прибрати цю глобальну змінну ми в класі NewsApiService створимо її заміну this.searchQuery = ''; і там же будемо її запам'ятовувати\n// let searchQuery ='';\n// і тоді ми можемо її прибрати звідси\n\nfunction onSearch(e) {\n    // щоб не перезавантажувалась сторінка робимоа preventDefault\n    e.preventDefault();\n// отримуєм доступ до форми, щоб читати запити\n// тут достукуємось також до цієї змінної\n//  searchQuery = e.currentTarget.elements.query.value\nnewsApiService.query = e.currentTarget.elements.query.value\n\n// При сабміті форми треба викликати сторінку на  newsapi.org\n    // const options = {\n    //     headers: {\n    //         Authorization: '15038c1cf1024f0f88ddd0a11fc0f440',\n    //     },\n    //     };\n        \n    //     const url = `https://newsapi.org/v2/everything?q=${searchQuery}&language=en&pageSize=8&page=1`;\n        \n        \n    //     fetch(url, options)\n    //     .then(r => r.json)\n    //     .then(console.log());\n    // всю цю логіку виносимо в окремий спеціально створений файл news-components\n    // і після того, як ми створили екземпляр классу NewsApiService і викликали його вище, звертаємось до нього\n    // а  searchQuery  передаємо йому як аргумент\n\n    newsApiService.fetchArticles();\n}\n\n// ми хочемо підгружати наступні сторінки при натисканні кнопки \"Показати ще\"\n// робим те саме, АЛЕ маємо проблему як достукатися до змінної const searchQuery ,якщо вона існує тільки в попередній функції?\n// тобто під час сабміту (натискання кнопки \"Пошук\") ми повинні зберігати десь ці данні, щоб потім їх взяти звідти! використовуємо LET\nfunction onLoadMore() {\n    // const options = {\n    //     headers: {\n    //         Authorization: '15038c1cf1024f0f88ddd0a11fc0f440',\n    //     },\n    //     };\n        \n    //     const url = `https://newsapi.org/v2/everything?q=${searchQuery}&language=en&pageSize=8&page=1`;\n        \n        \n    //     fetch(url, options)\n    //     .then(r => r.json)\n    //     .then(console.log());\n    // в цій функції все робимо аналогічно\n    newsApiService.fetchArticles();\n}\n\n\n\n\n\n","export default class NewsApiService {\n    constructor() {\nthis.searchQuery = '';\nthis.page = 1;\n    }\n\n    fetchArticles() {\n        console.log(this);\n        const options = {\n            headers: {\n                Authorization: '15038c1cf1024f0f88ddd0a11fc0f440',\n            },\n            };\n            \n            const url = `https://newsapi.org/v2/everything?q=${this.searchQuery}&language=en&pageSize=8&page=${this.page}`;\n            \n          // робимо запит, і якщо він вдалий, то збільшуємо сторінку на 1(якщо не вдалий нам це не треба)\n            fetch(url, options)\n            .then(r => r.json)\n            .then(data => {\n                this.page += 1;\n            });\n    }\n\n    // збережемо нашу змінну класу searchQuery\n    get query() {\n        return this.searchQuery;\n    }\n\n    set query(newQuery) {\n        this.searchQuery = newQuery;\n    }\n}"],"names":["$dbfbdf498c2a314a$var$refs","searchForm","document","querySelector","articlesContainer","loadMoreBtn","$dbfbdf498c2a314a$var$newsApiService","fetchArticles","console","log","this","url","searchQuery","page","fetch","headers","Authorization","then","r","json","data","query","newQuery","constructor","addEventListener","e","preventDefault","currentTarget","elements","value"],"version":3,"file":"03-load-more-btn.cf13c864.js.map"}