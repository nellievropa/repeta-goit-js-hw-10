var BASE_URL="https://api.themoviedb.org/3/",ENDPOINT="trending/movie/day",API_KEY="75a59728a8a611489d2b48a322755689",list=document.querySelector(".js-list"),target=document.querySelector(".js-guard"),currentPage=1,options={root:null,rootMargin:"300px",threshold:1},observer=new IntersectionObserver(onLoad,options);function onLoad(t,e){console.log(t),t.forEach((function(t){t.isIntersecting&&getTranding(currentPage+=1).then((function(t){list.insertAdjacentHTML("beforeend",createMarkup(t.results)),t.page===t.total_pages&&e.unobbserve(target)})).catch((function(t){return console.log(t)}))}))}function createMarkup(t){return t.map((function(t){var e=t.poster_path,n=t.title;return'<li>\n    <img src="https://image.tmdb.org/t/p/w400'.concat(e,'" alt="').concat(n,'">\n        <h2>').concat(n,"</h2>\n    </li>")})).join("")}function getTranding(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return fetch("".concat(BASE_URL).concat(ENDPOINT,"?api_key=").concat(API_KEY,"&page=").concat(t)).then((function(t){if(!t.ok)throw new Error(t.statusText);return t.json()}))}observer.observe(target2),getTranding().then((function(t){list.insertAdjacentHTML("beforeend",createMarkup(t.results)),observer.observe(target)})).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}));
//# sourceMappingURL=06-infinity-scroll.eb44b0f9.js.map
